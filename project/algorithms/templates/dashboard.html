{% extends 'base.html' %} {% block content %}

<div class="row row-title">
    <i class="fas fa-pen"></i>&nbsp; Draw some Digit
</div>
<div class="dashboard-cards">
    <div class="row row-cards">
        <div class="col-md-5">
            <div class="card card-canvas">
                <div class="card-image">
                    <canvas id="canvas" height="500"></canvas>
                </div>
                <button type="submit" class="btn-card"><span>Predict <i
                        class="far fa-arrow-alt-circle-right"></i></span>
                </button>

            </div>
        </div>

    </div>
</div>


<script type="text/javascript">

 $("#predict").click(function(){
    var $SCRIPT_ROOT = {{ request.script_root|tojson|safe }};
    var canvasObj = document.getElementById("canvas");
    var img = canvasObj.toDataURL();
    $.ajax({
        type: "POST",
        url: $SCRIPT_ROOT + "/predict",
        data: img,
        success: function(data){
            $('#result').text(data);
        }
    });
});




</script>

{% endblock %}

<div class="card text-center" id="main_card">
    <br>
    <div class="row">
        <div class="col-md-5 text-center">
            <div class="card text-center" id="dashboard_card">
                <div class="row">
                    <div class="col-md-2 text-center"></div>
                    <div class="col-md-8 text-center">
                        <br>
                        <h2>Draw a Digit</h2>
                        <input type="button" id="clear" value="Clear Canvas" class="button-function">
                    </div>
                    <div class="col-md-2 text-center"></div>
                </div>
                <div class="row canvas-row">
                    <div class="col-md-2 text-center">
                    </div>
                    <div class="col-md-8 text-center">
                        <canvas id="canvas" width="500" height="500" style="background:black"></canvas>
                    </div>
                    <div class="col-md-2 text-center"></div>
                </div>
                <div class="row text-center button-row">
                    <div class="col-md-4 text-center button-column">

                    </div>
                </div>
                <br><br>
            </div>
        </div>

        <div class="col-md-2 column-predict">
            <a id="predict" class="waves-effect waves-light btn-large">Predict</a>

        </div>
        <div class="col-md-3 text-center">
            <div class="card text-center" id="predict_card">
                <div class="row">
                    <div class="col-md-2 text-center"></div>
                    <div class="col-md-8 text-center">
                        <br>
                        <h2>You draw:</h2>
                        <h5 id="result"></h5>
                    </div>
                    <div class="col-md-2 text-center"></div>
                </div>

            </div>
        </div>
    <a id="predict" class="btn btn-card">Predict</a>
    </div>
</div>